!function(){function e(e){alert("Un error ocurrió: "+e.code)}function t(e){var t=e.coords.latitude,o=e.coords.longitude;console.log("Tu posición es: "+t+","+o),$.getJSON(c+"lat="+t+"&lon="+o,n)}function n(e){y.zone=e.name,y.icon=p+e.weather[0].icon+".png",y.temp=e.main.temp-273.15,y.temp_max=e.main.temp_max-273.15,y.temp_min=e.main.temp_min-273.15,y.main=e.weather[0].main,a()}function o(e){var t=document.querySelector(e);return document.importNode(t.content,!0)}function a(e){var t=o("#template--city");t.querySelector("[data-time]").innerHTML=u,t.querySelector("[data-icon]").src=y.icon,t.querySelector("[data-city]").innerHTML=y.zone,t.querySelector("[data-temp='max']").innerHTML=y.temp_max.toFixed(1),t.querySelector("[data-temp='min']").innerHTML=y.temp_min.toFixed(1),t.querySelector("[data-temp='current']").innerHTML=y.temp.toFixed(1),$(".loader").hide(),$(l).append(t)}function i(e){e.preventDefault(),console.log(c+"q="+$(h).val()),$.getJSON(c+"q="+$(h).val(),r)}function r(e){citiWeather={},y.icon=p+e.weather[0].icon+".png",y.temp=e.main.temp-273.15,y.temp_max=e.main.temp_max-273.15,y.temp_min=e.main.temp_min-273.15,y.main=e.weather[0].main,a(y)}var m="80114c7878f599621184a687fc500a12",c="http://api.openweathermap.org/data/2.5/weather?APPID="+m+"&",p="http://openweathermap.org/img/w/",d=new Date,u=d.toLocaleTimeString(),l=$("body"),g=$(".loader"),h=$("[data-input='cityAdd']"),f=$("[data-button='add']"),y={};y.zone,y.icon,y.temp,y.temp_max,y.temp_min,y.main,$(f).on("click",i),$(h).on("keypress",function(e){13==e.which&&i(e)}),navigator.geolocation?navigator.geolocation.getCurrentPosition(t,e):alert("Tu navegador no soporta Geolocation")}();